<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Is the Point on the Line?</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f9f9f9; margin: 0; }
    .container { max-width: 480px; margin: 40px auto; background: #fff; padding: 24px; border-radius: 8px; box-shadow: 0 2px 8px #0001; }
    h2 { text-align: center; }
    .formula, .point { font-size: 20px; text-align: center; margin: 18px 0; }
    .solution-box { background: #eee; color: #888; border-radius: 8px; padding: 18px; text-align: center; font-size: 18px; cursor: pointer; margin: 24px 0; transition: background 0.2s, color 0.2s; }
    .solution-box.revealed { background: #eaffea; color: #222; cursor: default; }
    .new-btn { display: block; margin: 0 auto; padding: 10px 24px; font-size: 16px; border-radius: 6px; border: none; background: #0074D9; color: #fff; cursor: pointer; }
    .new-btn:active { background: #005fa3; }
  </style>
</head>
<body>
  <div class="container">
    <h2>Is the Point on the Line?</h2>
    <div class="formula" id="formula"></div>
    <div class="point" id="point"></div>
    <div class="solution-box" id="solutionBox" onclick="revealSolution()">Click to reveal solution</div>
    <div id="graphContainer" style="display:none;">
      <canvas id="graph" width="400" height="300" style="display:block;margin:0 auto 24px auto;background:#fff;border:1px solid #ccc;"></canvas>
      <div id="explanation" style="max-width:400px;margin:0 auto 24px auto;font-size:17px;text-align:center;"></div>
    </div>
    <button class="new-btn" onclick="newProblem()">New Problem</button>
  </div>
  <script>
    let m, b, x, y, isOnLine;
    const formulaDiv = document.getElementById('formula');
    const pointDiv = document.getElementById('point');
    const solutionBox = document.getElementById('solutionBox');
    const graphContainer = document.getElementById('graphContainer');
    const graph = document.getElementById('graph');
    const gctx = graph.getContext('2d');
    const explanationDiv = document.getElementById('explanation');

    function randomInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function drawGraph() {
      gctx.clearRect(0, 0, 400, 300);
      // Axes
      gctx.strokeStyle = '#bbb';
      gctx.beginPath();
      gctx.moveTo(0, 150); gctx.lineTo(400, 150); // x-axis
      gctx.moveTo(200, 0); gctx.lineTo(200, 300); // y-axis
      gctx.stroke();
      // Draw line y = mx + b
      gctx.strokeStyle = '#0074D9';
      gctx.lineWidth = 2;
      gctx.beginPath();
      // x from -15 to 15
      let px1 = 200 + (-15) * 10;
      let py1 = 150 - (m * -15 + b) * 10;
      let px2 = 200 + (15) * 10;
      let py2 = 150 - (m * 15 + b) * 10;
      gctx.moveTo(px1, py1);
      gctx.lineTo(px2, py2);
      gctx.stroke();
      // Draw point
      let px = 200 + x * 10;
      let py = 150 - y * 10;
      gctx.beginPath();
      gctx.arc(px, py, 7, 0, 2 * Math.PI);
      gctx.fillStyle = isOnLine ? '#2ecc40' : '#ff4136';
      gctx.fill();
      gctx.lineWidth = 2;
      gctx.strokeStyle = '#222';
      gctx.stroke();
      // Label point
      gctx.font = '15px Arial';
      gctx.fillStyle = '#222';
      gctx.fillText(`(${x}, ${y})`, px + 10, py - 10);
    }

    function newProblem() {
      m = randomInt(-5, 5);
      while (m === 0) m = randomInt(-5, 5); // avoid m=0 for variety
      b = randomInt(-10, 10);
      x = randomInt(-12, 12);
      // 50% chance: point is on the line
      if (Math.random() < 0.5) {
        y = m * x + b;
        // Clamp y to -12..12 if needed
        if (y < -12) y = -12;
        if (y > 12) y = 12;
        isOnLine = (y === m * x + b);
      } else {
        // Off the line by 1-4 units
        let offset = randomInt(1, 4) * (Math.random() < 0.5 ? 1 : -1);
        y = m * x + b + offset;
        // Clamp y to -12..12 if needed
        if (y < -12) y = -12;
        if (y > 12) y = 12;
        isOnLine = false;
      }
      formulaDiv.textContent = `y = ${m}x ${b >= 0 ? "+" : "-"} ${Math.abs(b)}`;
      pointDiv.textContent = `Point: (${x}, ${y})`;
      solutionBox.textContent = "Click to reveal solution";
      solutionBox.classList.remove('revealed');
      graphContainer.style.display = 'none';
      explanationDiv.innerHTML = '';
    }

    function revealSolution() {
      if (solutionBox.classList.contains('revealed')) return;
      let calc = m * x + b;
      let steps = `Plug x into the equation: y = ${m}*${x} + ${b} = ${calc}`;
      let result = `Compare with y: ${y} ${isOnLine ? "= " : "≠ "}${calc}`;
      let answer = isOnLine ? "✅ The point is on the line!" : "❌ The point is NOT on the line.";
      solutionBox.innerHTML = `<div>${steps}</div><div>${result}</div><div style='margin-top:10px;font-weight:bold;'>${answer}</div>`;
      solutionBox.classList.add('revealed');
      // Show explanation and graph
      graphContainer.style.display = '';
      drawGraph();
      explanationDiv.innerHTML = isOnLine
        ? `The point lies exactly on the line y = ${m}x + ${b}.` 
        : `The point does not satisfy the equation y = ${m}x + ${b}.`;
    }

    newProblem();
  </script>
</body>
</html>
